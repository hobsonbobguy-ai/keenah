<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keenah | A Cosmic Celebration</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500&family=Montserrat:wght@100;200;300;400;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --void: #030305;
            --deep-space: #0a0a12;
            --nebula-core: #1a0f2e;
            --gold-rich: #C9A227;
            --gold-light: #E8D5A3;
            --gold-pale: #F5ECD7;
            --cyan-electric: #00E5FF;
            --cyan-soft: #7DF9FF;
            --purple-cosmic: #9B4DCA;
            --purple-deep: #6B2D9B;
            --rose-nebula: #FF6B9D;
            --silver-star: #E8E8F0;
            --glass-white: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.06);
            --text-primary: #F0EDE5;
            --text-secondary: #9A9A9A;
            --easing-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --easing-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
            --easing-expo: cubic-bezier(0.16, 1, 0.3, 1);
        }

        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            background: var(--void);
            color: var(--text-primary);
            font-family: 'Cormorant Garamond', Georgia, serif;
            line-height: 1.7;
            overflow-x: hidden;
            min-height: 100vh;
            cursor: none;
        }

        /* Custom Cursor */
        .cursor {
            position: fixed;
            pointer-events: none;
            z-index: 99999;
            mix-blend-mode: difference;
        }

        .cursor-dot {
            width: 8px;
            height: 8px;
            background: var(--gold-light);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease, opacity 0.3s ease;
        }

        .cursor-ring {
            width: 40px;
            height: 40px;
            border: 1px solid var(--gold-light);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.15s ease-out;
            opacity: 0.5;
        }

        .cursor-ring.expanded {
            width: 60px;
            height: 60px;
            opacity: 0.3;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: var(--void);
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--purple-cosmic), var(--gold-rich));
            border-radius: 3px;
        }

        /* Noise Texture Overlay */
        .noise {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 10000;
            opacity: 0.02;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
        }

        /* Vignette */
        .vignette {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 9998;
            background: radial-gradient(ellipse at center, transparent 0%, transparent 40%, rgba(0,0,0,0.7) 100%);
        }

        /* Warp Tunnel Effect */
        .warp-lines {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 9997;
            opacity: 0;
            transition: opacity 0.5s ease;
            background: radial-gradient(ellipse at center, transparent 30%, rgba(155, 77, 202, 0.1) 100%);
        }

        .warp-lines.active {
            opacity: 1;
        }

        /* ========================================
           ENTRY GATEWAY
           ======================================== */
        .entry-gateway {
            position: fixed;
            inset: 0;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: transparent;
            transition: opacity 2s var(--easing-expo), 
                        transform 2s var(--easing-expo),
                        filter 2s var(--easing-expo);
            overflow: hidden;
        }

        .entry-gateway::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg at 50% 50%, 
                transparent 0deg, 
                rgba(155, 77, 202, 0.03) 60deg,
                transparent 120deg,
                rgba(0, 229, 255, 0.02) 180deg,
                transparent 240deg,
                rgba(201, 162, 39, 0.03) 300deg,
                transparent 360deg);
            animation: cosmicSpin 60s linear infinite;
        }

        @keyframes cosmicSpin {
            to { transform: rotate(360deg); }
        }

        .entry-gateway.dissolve {
            opacity: 0;
            transform: scale(1.1);
            filter: blur(20px);
            pointer-events: none;
        }

        /* Orbital System */
        .orbital-system {
            position: relative;
            width: 200px;
            height: 200px;
            margin-bottom: 3rem;
        }

        .orbit {
            position: absolute;
            border: 1px solid;
            border-radius: 50%;
            animation: orbitPulse 4s ease-in-out infinite;
        }

        .orbit-1 {
            inset: 0;
            border-color: rgba(201, 162, 39, 0.3);
            animation: orbitRotate 20s linear infinite;
        }
        .orbit-2 {
            inset: 25px;
            border-color: rgba(0, 229, 255, 0.25);
            animation: orbitRotate 15s linear infinite reverse;
        }
        .orbit-3 {
            inset: 50px;
            border-color: rgba(155, 77, 202, 0.3);
            animation: orbitRotate 10s linear infinite;
        }
        .orbit-4 {
            inset: 70px;
            border-color: rgba(201, 162, 39, 0.4);
            border-width: 2px;
            animation: orbitRotate 7s linear infinite reverse;
        }

        @keyframes orbitRotate {
            to { transform: rotate(360deg); }
        }

        @keyframes orbitPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Orbital Bodies */
        .orbital-body {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--gold-light);
            border-radius: 50%;
            box-shadow: 0 0 20px var(--gold-rich), 0 0 40px var(--gold-rich);
        }

        .orbit-1 .orbital-body { top: -4px; left: 50%; transform: translateX(-50%); }
        .orbit-2 .orbital-body { top: 50%; right: -4px; transform: translateY(-50%); width: 6px; height: 6px; background: var(--cyan-electric); box-shadow: 0 0 15px var(--cyan-electric); }
        .orbit-3 .orbital-body { bottom: -4px; left: 50%; transform: translateX(-50%); width: 5px; height: 5px; background: var(--purple-cosmic); box-shadow: 0 0 15px var(--purple-cosmic); }

        /* Core Star */
        .core-star {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
        }

        .core-star::before,
        .core-star::after {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gold-pale);
            border-radius: 50%;
        }

        .core-star::before {
            animation: corePulse 2s ease-in-out infinite;
            box-shadow: 0 0 30px var(--gold-rich), 0 0 60px var(--gold-rich), 0 0 90px rgba(201, 162, 39, 0.5);
        }

        .core-star::after {
            inset: -10px;
            background: radial-gradient(circle, rgba(201, 162, 39, 0.3), transparent 70%);
            animation: coreGlow 3s ease-in-out infinite;
        }

        @keyframes corePulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        @keyframes coreGlow {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.5); opacity: 0.8; }
        }

        /* Entry Typography */
        .entry-overline {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.7rem;
            font-weight: 300;
            letter-spacing: 0.5em;
            text-transform: uppercase;
            color: var(--cyan-soft);
            margin-bottom: 1rem;
            opacity: 0;
            animation: fadeSlideUp 1s var(--easing-expo) 0.3s forwards;
        }

        .entry-name {
            font-family: 'Cinzel', serif;
            font-size: clamp(2.5rem, 8vw, 5rem);
            font-weight: 400;
            letter-spacing: 0.15em;
            background: linear-gradient(135deg, var(--gold-pale) 0%, var(--gold-rich) 50%, var(--gold-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 60px rgba(201, 162, 39, 0.3);
            opacity: 0;
            animation: fadeSlideUp 1s var(--easing-expo) 0.5s forwards;
        }

        .entry-tagline {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            font-style: italic;
            color: var(--text-secondary);
            margin-top: 0.5rem;
            opacity: 0;
            animation: fadeSlideUp 1s var(--easing-expo) 0.7s forwards;
        }

        @keyframes fadeSlideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Entry Button */
        .gateway-btn {
            margin-top: 4rem;
            padding: 1.25rem 3.5rem;
            background: transparent;
            border: 1px solid rgba(201, 162, 39, 0.3);
            color: var(--gold-light);
            font-family: 'Montserrat', sans-serif;
            font-size: 0.7rem;
            font-weight: 400;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            cursor: none;
            position: relative;
            overflow: hidden;
            transition: all 0.6s var(--easing-smooth);
            opacity: 0;
            animation: fadeSlideUp 1s var(--easing-expo) 0.9s forwards;
        }

        .gateway-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(201, 162, 39, 0.1), transparent);
            transition: left 0.6s var(--easing-smooth);
        }

        .gateway-btn::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(201, 162, 39, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .gateway-btn:hover {
            border-color: var(--gold-rich);
            box-shadow: 0 0 50px rgba(201, 162, 39, 0.15), inset 0 0 30px rgba(201, 162, 39, 0.05);
            transform: translateY(-2px);
        }

        .gateway-btn:hover::before {
            left: 100%;
        }

        .gateway-btn:hover::after {
            opacity: 1;
        }

        /* ========================================
           CANVAS SYSTEMS
           ======================================== */
        .canvas-container {
            position: fixed;
            inset: 0;
            z-index: -1;
            pointer-events: none;
            background: radial-gradient(ellipse at center bottom, #1a0b2e 0%, #0a0a12 40%, #030305 100%);
        }

        .canvas-container canvas {
            position: absolute;
            inset: 0;
        }

        #warpCanvas { z-index: 1; }
        #nebulaCanvas { z-index: 2; }
        #dustCanvas { z-index: 3; }
        #interactionCanvas { z-index: 4; }

        /* ========================================
           MAIN CONTENT
           ======================================== */
        .content-wrapper {
            position: relative;
            z-index: 100;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 clamp(1.5rem, 5vw, 4rem);
            opacity: 0;
            transform: translateY(50px);
            transition: all 2s var(--easing-expo);
        }

        .content-wrapper.revealed {
            opacity: 1;
            transform: translateY(0);
        }

        /* ========================================
           HERO SECTION
           ======================================== */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 4rem 0;
            position: relative;
        }

        .hero-constellation {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.65rem;
            font-weight: 300;
            letter-spacing: 0.6em;
            text-transform: uppercase;
            color: var(--cyan-electric);
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .constellation-line {
            width: 60px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--cyan-electric), transparent);
        }

        .hero-title {
            font-family: 'Cinzel', serif;
            font-weight: 400;
            line-height: 1.1;
            margin-bottom: 1rem;
        }

        .hero-title .line-1 {
            display: block;
            font-size: clamp(1.8rem, 5vw, 3rem);
            color: var(--silver-star);
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .hero-title .line-2 {
            display: block;
            font-size: clamp(3.5rem, 12vw, 9rem);
            background: linear-gradient(135deg, var(--gold-pale) 0%, var(--gold-rich) 40%, var(--gold-light) 70%, var(--gold-pale) 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: goldShimmer 8s linear infinite;
            letter-spacing: 0.05em;
            white-space: nowrap;
        }

        @keyframes goldShimmer {
            to { background-position: 200% center; }
        }

        /* Arrival Badge */
        .arrival-badge {
            margin-top: 3rem;
            padding: 2.5rem 4rem;
            background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(20px);
            position: relative;
        }

        .arrival-badge::before,
        .arrival-badge::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
        }

        .arrival-badge::before {
            top: -1px;
            left: -1px;
            border-top: 1px solid var(--gold-rich);
            border-left: 1px solid var(--gold-rich);
        }

        .arrival-badge::after {
            bottom: -1px;
            right: -1px;
            border-bottom: 1px solid var(--gold-rich);
            border-right: 1px solid var(--gold-rich);
        }

        .arrival-badge h2 {
            font-family: 'Cinzel', serif;
            font-size: clamp(1.2rem, 3.5vw, 2rem);
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-primary);
            white-space: nowrap;
        }

        .arrival-badge p {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.65rem;
            font-weight: 300;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            color: var(--gold-rich);
            margin-top: 1rem;
        }

        /* ========================================
           AUDIO PLAYER
           ======================================== */
        .audio-section {
            margin: 5rem auto;
            max-width: 500px;
        }

        .audio-player {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.5rem 2rem;
            background: linear-gradient(135deg, rgba(255,255,255,0.015), rgba(255,255,255,0.005));
            border-top: 1px solid var(--glass-border);
            border-bottom: 1px solid var(--glass-border);
            position: relative;
        }

        .audio-player::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 60%;
            background: linear-gradient(180deg, var(--gold-rich), var(--purple-cosmic));
            border-radius: 2px;
        }

        .play-toggle {
            width: 50px;
            height: 50px;
            border: 1px solid rgba(201, 162, 39, 0.4);
            border-radius: 50%;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: none;
            transition: all 0.4s var(--easing-smooth);
            flex-shrink: 0;
        }

        .play-toggle:hover {
            background: rgba(201, 162, 39, 0.1);
            border-color: var(--gold-rich);
            box-shadow: 0 0 30px rgba(201, 162, 39, 0.2);
        }

        .play-toggle svg {
            width: 16px;
            height: 16px;
            fill: none;
            stroke: var(--gold-light);
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: all 0.3s ease;
        }

        .play-toggle .pause-icon {
            display: none;
        }

        .play-toggle.playing .play-icon {
            display: none;
        }

        .play-toggle.playing .pause-icon {
            display: block;
        }

        .track-info {
            flex: 1;
            min-width: 0;
        }

        .track-title {
            display: block;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.75rem;
            font-weight: 400;
            letter-spacing: 0.15em;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .track-artist {
            display: block;
            font-family: 'Cormorant Garamond', serif;
            font-size: 0.95rem;
            font-style: italic;
            color: var(--text-secondary);
        }

        .waveform {
            display: flex;
            align-items: center;
            gap: 3px;
            height: 30px;
        }

        .wave-bar {
            width: 3px;
            height: 4px;
            background: linear-gradient(180deg, var(--gold-rich), var(--purple-cosmic));
            border-radius: 2px;
            transition: height 0.15s ease;
        }

        .audio-player.playing .wave-bar {
            animation: waveform 0.8s ease-in-out infinite;
        }

        @keyframes waveform {
            0%, 100% { height: 4px; }
            50% { height: 20px; }
        }

        .wave-bar:nth-child(1) { animation-delay: 0s; }
        .wave-bar:nth-child(2) { animation-delay: 0.1s; }
        .wave-bar:nth-child(3) { animation-delay: 0.2s; }
        .wave-bar:nth-child(4) { animation-delay: 0.15s; }
        .wave-bar:nth-child(5) { animation-delay: 0.25s; }
        .wave-bar:nth-child(6) { animation-delay: 0.05s; }
        .wave-bar:nth-child(7) { animation-delay: 0.18s; }

        /* ========================================
           PHOTO PORTAL
           ======================================== */
        .photo-section {
            margin: 8rem auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .photo-portal {
            position: relative;
            width: clamp(280px, 50vw, 380px);
            aspect-ratio: 3 / 4;
        }

        .portal-aura {
            position: absolute;
            inset: -40px;
            background: radial-gradient(ellipse at center, 
                rgba(0, 229, 255, 0.08) 0%, 
                rgba(155, 77, 202, 0.05) 30%,
                transparent 70%);
            animation: auraBreath 6s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes auraBreath {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }

        .portal-frame {
            position: absolute;
            inset: 0;
            border: 1px solid rgba(255, 255, 255, 0.08);
            pointer-events: none;
        }

        .corner-flourish {
            position: absolute;
            width: 40px;
            height: 40px;
            pointer-events: none;
        }

        .corner-flourish svg {
            width: 100%;
            height: 100%;
            stroke: var(--gold-rich);
            stroke-width: 1;
            fill: none;
        }

        .corner-flourish.top-left { top: -10px; left: -10px; }
        .corner-flourish.top-right { top: -10px; right: -10px; transform: scaleX(-1); }
        .corner-flourish.bottom-left { bottom: -10px; left: -10px; transform: scaleY(-1); }
        .corner-flourish.bottom-right { bottom: -10px; right: -10px; transform: scale(-1); }

        .photo-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: var(--deep-space);
        }

        .photo-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: contrast(1.05) saturate(0.9);
            transition: transform 1.5s var(--easing-expo), filter 1s ease;
        }

        .photo-portal:hover .photo-container img {
            transform: scale(1.05);
            filter: contrast(1.1) saturate(1);
        }

        .photo-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, 
                transparent 0%, 
                transparent 60%, 
                rgba(3, 3, 5, 0.6) 100%);
            pointer-events: none;
        }

        .photo-caption {
            margin-top: 2rem;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.6rem;
            font-weight: 300;
            letter-spacing: 0.5em;
            text-transform: uppercase;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .caption-diamond {
            width: 6px;
            height: 6px;
            background: var(--gold-rich);
            transform: rotate(45deg);
        }

        /* ========================================
           DIVIDER
           ======================================== */
        .celestial-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin: 5rem 0;
            opacity: 0.7;
        }

        .divider-line {
            flex: 1;
            max-width: 150px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--glass-border), transparent);
        }

        .divider-star {
            width: 20px;
            height: 20px;
        }

        .divider-star svg {
            width: 100%;
            height: 100%;
            fill: var(--gold-rich);
        }

        /* ========================================
           LETTER SECTION
           ======================================== */
        .letter-section {
            margin: 6rem auto;
            max-width: 800px;
        }

        .letter-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .letter-overline {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.6rem;
            font-weight: 300;
            letter-spacing: 0.5em;
            text-transform: uppercase;
            color: var(--purple-cosmic);
            margin-bottom: 1rem;
        }

        .letter-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 300;
            font-style: italic;
            color: var(--text-primary);
            letter-spacing: 0.05em;
        }

        .letter-body {
            padding: 4rem;
            background: linear-gradient(180deg, rgba(255,255,255,0.015) 0%, transparent 100%);
            border-left: 1px solid var(--glass-border);
            border-top: 1px solid var(--glass-border);
            position: relative;
        }

        .letter-body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 80px;
            height: 1px;
            background: var(--gold-rich);
        }

        .letter-body::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 1px;
            height: 80px;
            background: var(--gold-rich);
        }

        .letter-body p {
            font-size: clamp(1.05rem, 2.5vw, 1.2rem);
            line-height: 2;
            margin-bottom: 2rem;
            color: var(--text-primary);
            text-align: justify;
            hyphens: auto;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s var(--easing-expo);
        }

        .letter-body p.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .letter-body p:last-child {
            margin-bottom: 0;
        }

        .letter-body strong {
            font-family: 'Cinzel', serif;
            font-weight: 500;
            font-size: 1.3em;
            color: var(--gold-rich);
            letter-spacing: 0.05em;
        }

        .letter-body em {
            color: var(--cyan-electric);
            font-style: italic;
            text-shadow: 0 0 20px rgba(0, 229, 255, 0.3);
            transition: all 0.3s ease;
        }

        .letter-body em:hover {
            text-shadow: 0 0 30px rgba(0, 229, 255, 0.6);
        }

        /* ========================================
           SIGNATURE
           ======================================== */
        .signature-section {
            text-align: center;
            margin: 8rem 0;
            padding-bottom: 6rem;
        }

        .final-wish {
            font-family: 'Cinzel', serif;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 400;
            letter-spacing: 0.1em;
            background: linear-gradient(90deg, 
                var(--gold-rich) 0%, 
                var(--gold-light) 25%, 
                var(--gold-pale) 50%, 
                var(--gold-light) 75%, 
                var(--gold-rich) 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: goldShimmer 6s linear infinite;
            margin-bottom: 1.5rem;
        }

        .signature-name {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            font-style: italic;
            color: var(--text-secondary);
        }

        .ending-flourish {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 3rem;
            opacity: 0.5;
        }

        .flourish-line {
            width: 100px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold-rich), transparent);
        }

        .flourish-diamond {
            width: 8px;
            height: 8px;
            background: var(--gold-rich);
            transform: rotate(45deg);
        }

        /* ========================================
           FLOATING ELEMENTS
           ======================================== */
        .floating-elements {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 50;
            overflow: hidden;
        }

        .floating-shape {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }

        .floating-shape svg {
            width: 100%;
            height: 100%;
            stroke: currentColor;
            stroke-width: 1;
            fill: none;
        }

        /* Speed Indicator */
        .speed-indicator {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Montserrat', sans-serif;
            font-size: 0.6rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: var(--text-secondary);
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 100;
        }

        .speed-indicator.visible {
            opacity: 0.5;
        }

        /* ========================================
           RESPONSIVE
           ======================================== */
        @media (max-width: 768px) {
            .hero-title .line-2 {
                white-space: normal;
                line-height: 1;
            }

            .arrival-badge {
                padding: 2rem;
            }

            .arrival-badge h2 {
                white-space: normal;
                line-height: 1.3;
            }

            .letter-body {
                padding: 2rem;
            }

            .audio-player {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }

            .waveform {
                order: -1;
                width: 100%;
                justify-content: center;
            }

            .cursor, .cursor-ring, .cursor-dot {
                display: none;
            }

            body {
                cursor: auto;
            }

            .gateway-btn,
            .play-toggle {
                cursor: pointer;
            }
        }

        @media (max-width: 480px) {
            .photo-portal {
                width: 90%;
            }

            .orbital-system {
                width: 150px;
                height: 150px;
            }
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>

    <!-- Noise & Vignette -->
    <div class="noise"></div>
    <div class="vignette"></div>
    <div class="warp-lines" id="warpLines"></div>

    <!-- Custom Cursor -->
    <div class="cursor cursor-dot" id="cursorDot"></div>
    <div class="cursor cursor-ring" id="cursorRing"></div>

    <!-- Canvas Systems -->
    <div class="canvas-container">
        <canvas id="warpCanvas"></canvas>
        <canvas id="nebulaCanvas"></canvas>
        <canvas id="dustCanvas"></canvas>
        <canvas id="interactionCanvas"></canvas>
    </div>

    <!-- Floating Elements Container -->
    <div class="floating-elements" id="floatingElements"></div>

    <!-- Speed Indicator -->
    <div class="speed-indicator" id="speedIndicator">
        Warp Speed Active
    </div>

    <!-- Entry Gateway -->
    <section class="entry-gateway" id="entryGateway">
        <div class="orbital-system">
            <div class="orbit orbit-1"><div class="orbital-body"></div></div>
            <div class="orbit orbit-2"><div class="orbital-body"></div></div>
            <div class="orbit orbit-3"><div class="orbital-body"></div></div>
            <div class="orbit orbit-4"></div>
            <div class="core-star"></div>
        </div>

        <p class="entry-overline">The Universe Awaits</p>
        <h1 class="entry-name">Keenah</h1>
        <p class="entry-tagline">A Cosmic Celebration</p>

        <button class="gateway-btn" id="enterBtn">
            Initialize Celestial Sequence
        </button>
    </section>

    <!-- Main Content -->
    <main class="content-wrapper" id="contentWrapper">

        <!-- Hero Section -->
        <header class="hero">
            <div class="hero-constellation">
                <span class="constellation-line"></span>
                <span>Constellation No. 1127</span>
                <span class="constellation-line"></span>
            </div>

            <h1 class="hero-title">
                <span class="line-1">To My Beautiful</span>
                <span class="line-2">Keenah</span>
            </h1>

            <div class="arrival-badge">
                <h2>Your Day Has Arrived</h2>
                <p>The Cosmos Celebrates Your Light</p>
            </div>
        </header>

        <!-- Audio Player -->
        <section class="audio-section">
            <div class="audio-player" id="audioPlayer">
                <button class="play-toggle" id="playToggle">
                    <svg class="play-icon" viewBox="0 0 24 24">
                        <polygon points="5,3 19,12 5,21"></polygon>
                    </svg>
                    <svg class="pause-icon" viewBox="0 0 24 24">
                        <rect x="6" y="4" width="4" height="16"></rect>
                        <rect x="14" y="4" width="4" height="16"></rect>
                    </svg>
                </button>
                <div class="track-info">
                    <span class="track-title">PISCES</span>
                    <span class="track-artist">Tony Ann — Piano Cover</span>
                </div>
                <div class="waveform" id="waveform">
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                </div>
            </div>
            <audio id="bgMusic" loop preload="auto">
                <source src="Pisces - Tony Ann (Piano Cover).mp3" type="audio/mpeg">
            </audio>
        </section>

        <!-- Photo Portal -->
        <section class="photo-section">
            <div class="photo-portal">
                <div class="portal-aura"></div>
                <div class="portal-frame"></div>
                
                <div class="corner-flourish top-left">
                    <svg viewBox="0 0 40 40">
                        <path d="M0,20 L0,5 Q0,0 5,0 L20,0"></path>
                    </svg>
                </div>
                <div class="corner-flourish top-right">
                    <svg viewBox="0 0 40 40">
                        <path d="M0,20 L0,5 Q0,0 5,0 L20,0"></path>
                    </svg>
                </div>
                <div class="corner-flourish bottom-left">
                    <svg viewBox="0 0 40 40">
                        <path d="M0,20 L0,5 Q0,0 5,0 L20,0"></path>
                    </svg>
                </div>
                <div class="corner-flourish bottom-right">
                    <svg viewBox="0 0 40 40">
                        <path d="M0,20 L0,5 Q0,0 5,0 L20,0"></path>
                    </svg>
                </div>

                <div class="photo-container">
                    <img src="Screenshot 2025-11-27 181902.png" alt="Keenah" loading="lazy">
                    <div class="photo-overlay"></div>
                </div>
            </div>

            <p class="photo-caption">
                <span class="caption-diamond"></span>
                A Singular Beauty
                <span class="caption-diamond"></span>
            </p>
        </section>

        <!-- Celestial Divider -->
        <div class="celestial-divider">
            <span class="divider-line"></span>
            <span class="divider-star">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                </svg>
            </span>
            <span class="divider-line"></span>
        </div>

        <!-- Letter Section -->
        <section class="letter-section">
            <header class="letter-header">
                <p class="letter-overline">A Message Written in Starlight</p>
                <h2 class="letter-title">For You, Keenah</h2>
            </header>

            <article class="letter-body" id="letterBody">
                <p><strong>Keenah</strong>, in the infinite canvas of existence, where countless stars flicker and fade, some burn with a luminescence that defies comprehension. You are one such star—a radiant anomaly in the cosmic order, possessing a beauty that rewrites the very definition of the word.</p>

                <p>Today, the universe pauses to mark the moment you arrived—the day gravity itself must have shifted, and the cosmos gained a new center of wonder. This isn't merely a birthday; it's an <em>anniversary of starlight</em>, a commemoration of the most extraordinary phenomenon I've had the privilege of witnessing.</p>

                <p>Your beauty operates on wavelengths unseen by ordinary eyes. It's in the architecture of your thoughts, the constellation of your smile, the way you transform the mundane into something worth remembering. You possess a gravity that draws everything beautiful toward you, yet you remain somehow unaware of your own <em>orbital pull</em>.</p>

                <p>There's a complexity to you that I'm still learning to map—territories of your soul that shimmer like undiscovered nebulae, each layer revealing new wonders, new reasons why the universe must have conspired with meticulous care to create exactly this: <em>exactly you</em>.</p>

                <p>You deserve a celebration that captures even a fraction of your worth. And while galaxies themselves would fall short, know that today, you are <em>seen</em>. You are <em>cherished</em>. You are exactly the cosmic phenomenon you were always meant to be—blazing, beautiful, and utterly irreplaceable.</p>

                <p>May this orbit around the sun bring you everything you deserve—which is to say, <em>everything</em>. May you find joy in unexpected corners, peace in quiet moments, and the unwavering knowledge that you are loved beyond the measure of light-years.</p>

                <p>Happy Birthday, my beautiful Keenah. The stars shine brighter because of you.</p>
            </article>
        </section>

        <!-- Signature -->
        <footer class="signature-section">
            <p class="final-wish">As the cosmos ages</p>
            <p class="signature-name">Yours truly, Aecha</p>

            <div class="ending-flourish">
                <span class="flourish-line"></span>
                <span class="flourish-diamond"></span>
                <span class="flourish-line"></span>
            </div>
        </footer>

    </main>

    <script>
        /**
         * ═══════════════════════════════════════════════════════════════════
         * COSMIC BIRTHDAY EXPERIENCE — IMMERSIVE WARP FIELD
         * ═══════════════════════════════════════════════════════════════════
         * 
         * Features:
         * - 3D Warp-speed star field with perspective projection
         * - Multi-layer depth system (close, mid, far stars)
         * - Cosmic nebula clouds drifting past
         * - Shooting stars streaking across
         * - Dynamic speed control
         * - Ambient dust particles
         * - Interactive particle trails
         */

        'use strict';

        // ═══════════════════════════════════════════════════════════════════
        // CONFIGURATION
        // ═══════════════════════════════════════════════════════════════════

        const CONFIG = Object.freeze({
            WARP: {
                STAR_COUNT: 1200,
                BASE_SPEED: 0.8,
                WARP_SPEED: 35,
                WARP_DURATION: 3000,
                DECELERATION: 0.97,
                PERSPECTIVE: 800,
                SPAWN_DISTANCE: 2500,
                COLORS: ['#FFFFFF', '#E8D5A3', '#00E5FF', '#C9A227', '#B8C4FF', '#FFE4C4', '#9B4DCA']
            },
            NEBULA: {
                CLOUD_COUNT: 8,
                MIN_SIZE: 100,
                MAX_SIZE: 400,
                DRIFT_SPEED: 0.3,
                OPACITY: 0.08
            },
            DUST: {
                COUNT: 200,
                MIN_SIZE: 1,
                MAX_SIZE: 3,
                PARALLAX: 0.02
            },
            SHOOTING_STARS: {
                INTERVAL_MIN: 2000,
                INTERVAL_MAX: 5000,
                SPEED: 15,
                LENGTH: 150
            },
            INTERACTION: {
                MAX_PARTICLES: 300,
                SPAWN_RATE: 0.4,
                GRAVITY: 50
            },
            COLORS: {
                GOLD: '#C9A227',
                GOLD_LIGHT: '#E8D5A3',
                CYAN: '#00E5FF',
                PURPLE: '#9B4DCA',
                ROSE: '#FF6B9D',
                WHITE: '#F0EDE5'
            }
        });

        // ═══════════════════════════════════════════════════════════════════
        // STATE
        // ═══════════════════════════════════════════════════════════════════

        const State = {
            mouse: { x: window.innerWidth / 2, y: window.innerHeight / 2 },
            smoothMouse: { x: window.innerWidth / 2, y: window.innerHeight / 2 },
            dimensions: { width: window.innerWidth, height: window.innerHeight },
            dpr: Math.min(window.devicePixelRatio || 1, 2),
            warpSpeed: CONFIG.WARP.BASE_SPEED,
            targetSpeed: CONFIG.WARP.BASE_SPEED,
            isWarping: false,
            isActive: false,
            scrollY: 0,
            time: 0
        };

        // ═══════════════════════════════════════════════════════════════════
        // UTILITIES
        // ═══════════════════════════════════════════════════════════════════

        const Utils = {
            lerp: (a, b, t) => a + (b - a) * t,
            clamp: (v, min, max) => Math.min(Math.max(v, min), max),
            random: (min, max) => Math.random() * (max - min) + min,
            randomInt: (min, max) => Math.floor(Utils.random(min, max)),
            throttle: (fn, delay) => {
                let last = 0;
                return (...args) => {
                    const now = performance.now();
                    if (now - last >= delay) { last = now; return fn(...args); }
                };
            },
            debounce: (fn, delay) => {
                let id;
                return (...args) => { clearTimeout(id); id = setTimeout(() => fn(...args), delay); };
            }
        };

        // ═══════════════════════════════════════════════════════════════════
        // CANVAS MANAGER
        // ═══════════════════════════════════════════════════════════════════

        class CanvasManager {
            constructor(id) {
                this.canvas = document.getElementById(id);
                this.ctx = this.canvas.getContext('2d', { alpha: true, desynchronized: true });
                this.resize();
            }

            resize() {
                const { width, height } = State.dimensions;
                const dpr = State.dpr;
                this.canvas.width = width * dpr;
                this.canvas.height = height * dpr;
                this.canvas.style.width = `${width}px`;
                this.canvas.style.height = `${height}px`;
                this.ctx.scale(dpr, dpr);
                this.width = width;
                this.height = height;
                this.centerX = width / 2;
                this.centerY = height / 2;
            }

            clear(trail = false, opacity = 0.1) {
                if (trail) {
                    this.ctx.fillStyle = `rgba(3, 3, 5, ${opacity})`;
                    this.ctx.fillRect(0, 0, this.width, this.height);
                } else {
                    this.ctx.clearRect(0, 0, this.width, this.height);
                }
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // 3D WARP STAR FIELD
        // ═══════════════════════════════════════════════════════════════════

        class WarpStarField {
            constructor(canvas) {
                this.canvas = canvas;
                this.stars = [];
                this.init();
            }

            init() {
                const { STAR_COUNT, SPAWN_DISTANCE, COLORS } = CONFIG.WARP;
                
                this.stars = Array.from({ length: STAR_COUNT }, () => ({
                    x: (Math.random() - 0.5) * State.dimensions.width * 3,
                    y: (Math.random() - 0.5) * State.dimensions.height * 3,
                    z: Math.random() * SPAWN_DISTANCE,
                    size: Utils.random(0.5, 2.5),
                    color: COLORS[Utils.randomInt(0, COLORS.length)],
                    brightness: Utils.random(0.5, 1)
                }));
            }

            update(dt) {
                const { SPAWN_DISTANCE, PERSPECTIVE } = CONFIG.WARP;
                const speed = State.warpSpeed;

                this.stars.forEach(star => {
                    star.z -= speed * dt * 60;

                    // Reset star when it passes the camera
                    if (star.z <= 1) {
                        star.z = SPAWN_DISTANCE;
                        star.x = (Math.random() - 0.5) * State.dimensions.width * 3;
                        star.y = (Math.random() - 0.5) * State.dimensions.height * 3;
                    }
                });
            }

            render() {
                const { ctx, width, height, centerX, centerY } = this.canvas;
                const { PERSPECTIVE } = CONFIG.WARP;
                const speed = State.warpSpeed;

                // Dynamic trail based on speed
                const trailOpacity = Utils.lerp(0.15, 0.02, Math.min(speed / 20, 1));
                this.canvas.clear(true, trailOpacity);

                // Sort by z for proper layering (far to near)
                const sortedStars = [...this.stars].sort((a, b) => b.z - a.z);

                sortedStars.forEach(star => {
                    // Perspective projection
                    const scale = PERSPECTIVE / star.z;
                    const x = star.x * scale + centerX;
                    const y = star.y * scale + centerY;

                    // Only render if on screen
                    if (x < -50 || x > width + 50 || y < -50 || y > height + 50) return;

                    // Size and brightness based on distance
                    const distanceFactor = 1 - star.z / CONFIG.WARP.SPAWN_DISTANCE;
                    const size = star.size * scale * 0.5;
                    const alpha = distanceFactor * star.brightness;

                    // Draw star with glow
                    ctx.globalAlpha = alpha;

                    // Streak effect when moving fast
                    if (speed > 5) {
                        const streakLength = Math.min(speed * 2, 50) * scale * 0.1;
                        const angle = Math.atan2(star.y, star.x);
                        
                        const gradient = ctx.createLinearGradient(
                            x, y,
                            x - Math.cos(angle) * streakLength,
                            y - Math.sin(angle) * streakLength
                        );
                        gradient.addColorStop(0, star.color);
                        gradient.addColorStop(1, 'transparent');

                        ctx.strokeStyle = gradient;
                        ctx.lineWidth = size;
                        ctx.lineCap = 'round';
                        ctx.beginPath();
                        ctx.moveTo(x, y);
                        ctx.lineTo(
                            x - Math.cos(angle) * streakLength,
                            y - Math.sin(angle) * streakLength
                        );
                        ctx.stroke();
                    }

                    // Star point with glow
                    const glowSize = size * 3;
                    const glow = ctx.createRadialGradient(x, y, 0, x, y, glowSize);
                    glow.addColorStop(0, star.color);
                    glow.addColorStop(0.3, `${star.color}80`);
                    glow.addColorStop(1, 'transparent');

                    ctx.fillStyle = glow;
                    ctx.beginPath();
                    ctx.arc(x, y, glowSize, 0, Math.PI * 2);
                    ctx.fill();
                });

                ctx.globalAlpha = 1;
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // NEBULA CLOUDS
        // ═══════════════════════════════════════════════════════════════════

        class NebulaSystem {
            constructor(canvas) {
                this.canvas = canvas;
                this.clouds = [];
                this.init();
            }

            init() {
                const { CLOUD_COUNT, MIN_SIZE, MAX_SIZE } = CONFIG.NEBULA;
                const { width, height } = State.dimensions;

                this.clouds = Array.from({ length: CLOUD_COUNT }, () => ({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    z: Utils.random(500, 2000),
                    size: Utils.random(MIN_SIZE, MAX_SIZE),
                    hue: [270, 180, 320, 45, 200][Utils.randomInt(0, 5)],
                    driftX: Utils.random(-0.5, 0.5),
                    driftY: Utils.random(-0.3, 0.3),
                    pulseOffset: Math.random() * Math.PI * 2,
                    opacity: Utils.random(0.03, 0.08)
                }));
            }

            update(dt) {
                const { width, height } = State.dimensions;
                const speed = State.warpSpeed;

                this.clouds.forEach(cloud => {
                    // Move with warp (slower than stars for parallax)
                    cloud.z -= speed * dt * 20;

                    // Drift
                    cloud.x += cloud.driftX * dt * 60;
                    cloud.y += cloud.driftY * dt * 60;

                    // Reset when passed
                    if (cloud.z <= 100) {
                        cloud.z = 2000;
                        cloud.x = Math.random() * width;
                        cloud.y = Math.random() * height;
                    }

                    // Wrap around edges
                    if (cloud.x < -cloud.size) cloud.x = width + cloud.size;
                    if (cloud.x > width + cloud.size) cloud.x = -cloud.size;
                    if (cloud.y < -cloud.size) cloud.y = height + cloud.size;
                    if (cloud.y > height + cloud.size) cloud.y = -cloud.size;
                });
            }

            render() {
                const { ctx, width, height, centerX, centerY } = this.canvas;
                this.canvas.clear();

                const time = State.time;

                this.clouds.forEach(cloud => {
                    // Perspective scale
                    const scale = 800 / cloud.z;
                    const x = (cloud.x - centerX) * scale + centerX;
                    const y = (cloud.y - centerY) * scale + centerY;
                    const size = cloud.size * scale;

                    // Pulsing opacity
                    const pulse = Math.sin(time * 0.001 + cloud.pulseOffset) * 0.3 + 0.7;
                    const alpha = cloud.opacity * pulse * scale;

                    const gradient = ctx.createRadialGradient(x, y, 0, x, y, size);
                    gradient.addColorStop(0, `hsla(${cloud.hue}, 60%, 50%, ${alpha})`);
                    gradient.addColorStop(0.4, `hsla(${cloud.hue}, 50%, 40%, ${alpha * 0.5})`);
                    gradient.addColorStop(1, 'transparent');

                    ctx.fillStyle = gradient;
                    ctx.fillRect(x - size, y - size, size * 2, size * 2);
                });
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // COSMIC DUST & SHOOTING STARS
        // ═══════════════════════════════════════════════════════════════════

        class DustSystem {
            constructor(canvas) {
                this.canvas = canvas;
                this.particles = [];
                this.shootingStars = [];
                this.lastShootingStar = 0;
                this.init();
            }

            init() {
                const { COUNT, MIN_SIZE, MAX_SIZE } = CONFIG.DUST;
                const { width, height } = State.dimensions;

                this.particles = Array.from({ length: COUNT }, () => ({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    z: Utils.random(0.3, 1),
                    size: Utils.random(MIN_SIZE, MAX_SIZE),
                    twinkle: Math.random() * Math.PI * 2,
                    twinkleSpeed: Utils.random(0.002, 0.005)
                }));
            }

            spawnShootingStar() {
                const { width, height } = State.dimensions;
                const { SPEED, LENGTH } = CONFIG.SHOOTING_STARS;

                // Random starting position (usually from top/sides)
                const startX = Math.random() * width;
                const startY = -50;
                const angle = Utils.random(Math.PI / 6, Math.PI / 3);
                
                this.shootingStars.push({
                    x: startX,
                    y: startY,
                    vx: Math.cos(angle) * SPEED,
                    vy: Math.sin(angle) * SPEED,
                    length: LENGTH,
                    life: 1,
                    decay: Utils.random(0.005, 0.015),
                    hue: [45, 180, 280][Utils.randomInt(0, 3)]
                });
            }

            update(dt) {
                const { width, height } = State.dimensions;
                const { smoothMouse } = State;
                const { PARALLAX } = CONFIG.DUST;

                // Update dust particles with parallax
                this.particles.forEach(p => {
                    p.twinkle += p.twinkleSpeed * dt * 1000;
                    
                    // Subtle drift based on scroll
                    p.y += State.warpSpeed * 0.1 * p.z * dt * 60;
                    if (p.y > height + 10) {
                        p.y = -10;
                        p.x = Math.random() * width;
                    }
                });

                // Update shooting stars
                this.shootingStars = this.shootingStars.filter(star => {
                    star.x += star.vx * dt * 60;
                    star.y += star.vy * dt * 60;
                    star.life -= star.decay * dt * 60;
                    return star.life > 0 && star.x < width + 100 && star.y < height + 100;
                });

                // Spawn new shooting stars
                const now = performance.now();
                const { INTERVAL_MIN, INTERVAL_MAX } = CONFIG.SHOOTING_STARS;
                if (now - this.lastShootingStar > Utils.random(INTERVAL_MIN, INTERVAL_MAX)) {
                    this.spawnShootingStar();
                    this.lastShootingStar = now;
                }
            }

            render() {
                const { ctx, width, height, centerX, centerY } = this.canvas;
                const { smoothMouse } = State;
                const { PARALLAX } = CONFIG.DUST;

                this.canvas.clear();

                // Draw dust particles
                this.particles.forEach(p => {
                    const parallaxX = (smoothMouse.x - centerX) * PARALLAX * p.z;
                    const parallaxY = (smoothMouse.y - centerY) * PARALLAX * p.z;
                    
                    const x = p.x + parallaxX;
                    const y = p.y + parallaxY;
                    
                    const twinkle = Math.sin(p.twinkle) * 0.5 + 0.5;
                    
                    ctx.globalAlpha = twinkle * 0.6;
                    ctx.fillStyle = '#F0EDE5';
                    ctx.beginPath();
                    ctx.arc(x, y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                });

                // Draw shooting stars
                ctx.globalCompositeOperation = 'lighter';
                
                this.shootingStars.forEach(star => {
                    const tailX = star.x - (star.vx / Math.abs(star.vx)) * star.length * star.life;
                    const tailY = star.y - (star.vy / Math.abs(star.vy)) * star.length * star.life;

                    const gradient = ctx.createLinearGradient(star.x, star.y, tailX, tailY);
                    gradient.addColorStop(0, `hsla(${star.hue}, 100%, 90%, ${star.life})`);
                    gradient.addColorStop(0.3, `hsla(${star.hue}, 90%, 70%, ${star.life * 0.6})`);
                    gradient.addColorStop(1, 'transparent');

                    ctx.strokeStyle = gradient;
                    ctx.lineWidth = 2;
                    ctx.lineCap = 'round';
                    ctx.beginPath();
                    ctx.moveTo(star.x, star.y);
                    ctx.lineTo(tailX, tailY);
                    ctx.stroke();

                    // Bright head
                    const headGlow = ctx.createRadialGradient(star.x, star.y, 0, star.x, star.y, 8);
                    headGlow.addColorStop(0, `hsla(${star.hue}, 100%, 95%, ${star.life})`);
                    headGlow.addColorStop(1, 'transparent');
                    ctx.fillStyle = headGlow;
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, 8, 0, Math.PI * 2);
                    ctx.fill();
                });

                ctx.globalCompositeOperation = 'source-over';
                ctx.globalAlpha = 1;
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // INTERACTION PARTICLES
        // ═══════════════════════════════════════════════════════════════════

        class InteractionSystem {
            constructor(canvas) {
                this.canvas = canvas;
                this.particles = [];
                this.prevMouse = { x: 0, y: 0 };
            }

            createTrail(x, y) {
                const dx = x - this.prevMouse.x;
                const dy = y - this.prevMouse.y;
                const dist = Math.hypot(dx, dy);

                if (dist > 5 && Math.random() < CONFIG.INTERACTION.SPAWN_RATE) {
                    const angle = Math.atan2(dy, dx) + Math.PI;
                    const spread = Math.PI / 3;
                    const particleAngle = angle + Utils.random(-spread, spread);
                    const speed = Utils.random(30, 80);

                    this.particles.push({
                        x, y,
                        vx: Math.cos(particleAngle) * speed,
                        vy: Math.sin(particleAngle) * speed,
                        life: Utils.random(1, 2),
                        maxLife: Utils.random(1, 2),
                        size: Utils.random(2, 5),
                        hue: Utils.random(35, 55)
                    });

                    // Limit particles
                    if (this.particles.length > CONFIG.INTERACTION.MAX_PARTICLES) {
                        this.particles.shift();
                    }
                }

                this.prevMouse.x = x;
                this.prevMouse.y = y;
            }

            createBurst(x, y, count = 25) {
                for (let i = 0; i < count; i++) {
                    const angle = (Math.PI * 2 * i) / count + Utils.random(-0.3, 0.3);
                    const speed = Utils.random(80, 200);
                    const hue = [45, 180, 280, 320][Utils.randomInt(0, 4)];

                    this.particles.push({
                        x, y,
                        vx: Math.cos(angle) * speed,
                        vy: Math.sin(angle) * speed,
                        life: Utils.random(1, 2.5),
                        maxLife: Utils.random(1, 2.5),
                        size: Utils.random(3, 8),
                        hue
                    });
                }
            }

            update(dt) {
                this.particles = this.particles.filter(p => {
                    p.vy += CONFIG.INTERACTION.GRAVITY * dt;
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;
                    p.life -= dt;
                    return p.life > 0;
                });
            }

            render() {
                const { ctx } = this.canvas;
                this.canvas.clear();

                ctx.globalCompositeOperation = 'lighter';

                this.particles.forEach(p => {
                    const lifeRatio = p.life / p.maxLife;
                    const size = p.size * lifeRatio;

                    const gradient = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, size * 3);
                    gradient.addColorStop(0, `hsla(${p.hue}, 90%, 70%, ${lifeRatio})`);
                    gradient.addColorStop(0.5, `hsla(${p.hue}, 80%, 60%, ${lifeRatio * 0.5})`);
                    gradient.addColorStop(1, 'transparent');

                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, size * 3, 0, Math.PI * 2);
                    ctx.fill();
                });

                ctx.globalCompositeOperation = 'source-over';
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // FLOATING SHAPES
        // ═══════════════════════════════════════════════════════════════════

        class FloatingShapes {
            constructor() {
                this.container = document.getElementById('floatingElements');
            }

            create(x, y) {
                const shape = document.createElement('div');
                shape.className = 'floating-shape';

                const types = ['diamond', 'star', 'circle'];
                const type = types[Utils.randomInt(0, types.length)];
                const size = Utils.random(15, 30);
                const hue = [45, 180, 280][Utils.randomInt(0, 3)];

                shape.style.cssText = `
                    left: ${x}px;
                    top: ${y}px;
                    width: ${size}px;
                    height: ${size}px;
                    color: hsl(${hue}, 70%, 60%);
                `;

                const svgs = {
                    diamond: '<svg viewBox="0 0 24 24"><path d="M12 2L22 12L12 22L2 12L12 2Z"/></svg>',
                    star: '<svg viewBox="0 0 24 24"><path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/></svg>',
                    circle: '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/></svg>'
                };

                shape.innerHTML = svgs[type];
                this.container.appendChild(shape);

                requestAnimationFrame(() => {
                    shape.style.transition = 'all 3s cubic-bezier(0.165, 0.84, 0.44, 1)';
                    shape.style.opacity = '0.8';
                    shape.style.transform = `translateY(-150px) rotate(${Utils.random(-180, 180)}deg) scale(1.5)`;

                    setTimeout(() => { shape.style.opacity = '0'; }, 1500);
                });

                setTimeout(() => shape.remove(), 3000);
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // CUSTOM CURSOR
        // ═══════════════════════════════════════════════════════════════════

        class CustomCursor {
            constructor() {
                this.dot = document.getElementById('cursorDot');
                this.ring = document.getElementById('cursorRing');
                this.pos = { x: 0, y: 0 };
                this.ringPos = { x: 0, y: 0 };
            }

            update() {
                const { mouse } = State;
                this.pos.x = Utils.lerp(this.pos.x, mouse.x, 0.5);
                this.pos.y = Utils.lerp(this.pos.y, mouse.y, 0.5);
                this.ringPos.x = Utils.lerp(this.ringPos.x, mouse.x, 0.15);
                this.ringPos.y = Utils.lerp(this.ringPos.y, mouse.y, 0.15);

                this.dot.style.transform = `translate(${this.pos.x}px, ${this.pos.y}px) translate(-50%, -50%)`;
                this.ring.style.transform = `translate(${this.ringPos.x}px, ${this.ringPos.y}px) translate(-50%, -50%)`;
            }

            expand() { this.ring.classList.add('expanded'); }
            contract() { this.ring.classList.remove('expanded'); }
        }

        // ═══════════════════════════════════════════════════════════════════
        // AUDIO CONTROLLER
        // ═══════════════════════════════════════════════════════════════════

        class AudioController {
            constructor() {
                this.audio = document.getElementById('bgMusic');
                this.toggle = document.getElementById('playToggle');
                this.player = document.getElementById('audioPlayer');
                this.toggle.addEventListener('click', () => this.togglePlay());
            }

            async togglePlay() {
                try {
                    if (this.audio.paused) {
                        await this.audio.play();
                        this.toggle.classList.add('playing');
                        this.player.classList.add('playing');
                    } else {
                        this.audio.pause();
                        this.toggle.classList.remove('playing');
                        this.player.classList.remove('playing');
                    }
                } catch (e) { console.log('Audio error:', e); }
            }

            async autoPlay() {
                try {
                    this.audio.volume = 0.6;
                    await this.audio.play();
                    this.toggle.classList.add('playing');
                    this.player.classList.add('playing');
                } catch (e) { console.log('Autoplay blocked'); }
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // SCROLL OBSERVER
        // ═══════════════════════════════════════════════════════════════════

        class ScrollObserver {
            constructor() {
                this.observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) entry.target.classList.add('visible');
                        });
                    },
                    { threshold: 0.1, rootMargin: '0px 0px -50px 0px' }
                );
            }

            observe(selector) {
                document.querySelectorAll(selector).forEach(el => this.observer.observe(el));
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // MAIN APPLICATION
        // ══════════════════════════════════════════════════���════════════════

        class CosmicExperience {
            constructor() {
                this.canvases = {};
                this.systems = {};
                this.lastTime = 0;
                this.isRunning = false;
            }

            init() {
                // Initialize canvases
                ['warpCanvas', 'nebulaCanvas', 'dustCanvas', 'interactionCanvas'].forEach(id => {
                    this.canvases[id] = new CanvasManager(id);
                });

                // Initialize systems
                this.systems.warp = new WarpStarField(this.canvases.warpCanvas);
                this.systems.nebula = new NebulaSystem(this.canvases.nebulaCanvas);
                this.systems.dust = new DustSystem(this.canvases.dustCanvas);
                this.systems.interaction = new InteractionSystem(this.canvases.interactionCanvas);
                this.systems.floating = new FloatingShapes();
                this.systems.cursor = new CustomCursor();
                this.systems.audio = new AudioController();
                this.systems.scrollObserver = new ScrollObserver();

                this.bindEvents();
            }

            bindEvents() {
                // Mouse movement
                const handleMouseMove = Utils.throttle((e) => {
                    State.mouse.x = e.clientX;
                    State.mouse.y = e.clientY;

                    if (State.isActive) {
                        this.systems.interaction.createTrail(e.clientX, e.clientY);
                    }
                }, 16);

                document.addEventListener('mousemove', handleMouseMove, { passive: true });

                // Touch support
                document.addEventListener('touchmove', (e) => {
                    if (e.touches.length > 0) {
                        handleMouseMove({ clientX: e.touches[0].clientX, clientY: e.touches[0].clientY });
                    }
                }, { passive: true });

                // Click effects
                const handleClick = (x, y) => {
                    if (State.isActive) {
                        this.systems.interaction.createBurst(x, y);
                        this.systems.floating.create(x, y);
                    }
                };

                document.addEventListener('click', (e) => handleClick(e.clientX, e.clientY));
                document.addEventListener('touchstart', (e) => {
                    if (e.touches.length > 0) handleClick(e.touches[0].clientX, e.touches[0].clientY);
                }, { passive: true });

                // Scroll-based speed boost
                let scrollTimeout;
                window.addEventListener('scroll', () => {
                    State.scrollY = window.scrollY;
                    State.targetSpeed = CONFIG.WARP.BASE_SPEED + 3; // Slight boost on scroll

                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => {
                        State.targetSpeed = CONFIG.WARP.BASE_SPEED;
                    }, 300);
                }, { passive: true });

                // Cursor interactions
                document.querySelectorAll('button, a, .photo-portal, .play-toggle').forEach(el => {
                    el.addEventListener('mouseenter', () => this.systems.cursor.expand());
                    el.addEventListener('mouseleave', () => this.systems.cursor.contract());
                });

                // Resize
                window.addEventListener('resize', Utils.debounce(() => {
                    State.dimensions.width = window.innerWidth;
                    State.dimensions.height = window.innerHeight;
                    Object.values(this.canvases).forEach(c => c.resize());
                    this.systems.warp.init();
                    this.systems.nebula.init();
                    this.systems.dust.init();
                }, 200));

                // Entry button
                document.getElementById('enterBtn').addEventListener('click', () => this.start());
            }

            start() {
                const gateway = document.getElementById('entryGateway');
                const content = document.getElementById('contentWrapper');
                const warpLines = document.getElementById('warpLines');
                const speedIndicator = document.getElementById('speedIndicator');

                // Trigger warp speed
                State.warpSpeed = CONFIG.WARP.WARP_SPEED;
                State.isWarping = true;
                warpLines.classList.add('active');
                speedIndicator.classList.add('visible');

                gateway.classList.add('dissolve');

                // Decelerate after warp duration
                setTimeout(() => {
                    State.isWarping = false;
                    State.targetSpeed = CONFIG.WARP.BASE_SPEED;
                    warpLines.classList.remove('active');
                    speedIndicator.classList.remove('visible');
                }, CONFIG.WARP.WARP_DURATION);

                setTimeout(() => {
                    gateway.style.display = 'none';
                    content.classList.add('revealed');
                    State.isActive = true;
                    this.systems.audio.autoPlay();
                    this.systems.scrollObserver.observe('#letterBody p');
                }, 1500);
            }

            animate = (timestamp) => {
                if (!this.isRunning) return;

                const dt = Math.min((timestamp - this.lastTime) / 1000, 0.1);
                this.lastTime = timestamp;
                State.time = timestamp;

                // Smooth speed transitions
                if (!State.isWarping) {
                    State.warpSpeed = Utils.lerp(State.warpSpeed, State.targetSpeed, 0.02);
                } else {
                    // During warp, maintain high speed with slight deceleration at end
                    if (State.warpSpeed > CONFIG.WARP.WARP_SPEED * 0.3) {
                        State.warpSpeed *= CONFIG.WARP.DECELERATION;
                    }
                }

                // Smooth mouse
                State.smoothMouse.x = Utils.lerp(State.smoothMouse.x, State.mouse.x, 0.08);
                State.smoothMouse.y = Utils.lerp(State.smoothMouse.y, State.mouse.y, 0.08);

                // Update systems
                this.systems.warp.update(dt);
                this.systems.nebula.update(dt);
                this.systems.dust.update(dt);
                this.systems.interaction.update(dt);
                this.systems.cursor.update();

                // Render
                this.systems.warp.render();
                this.systems.nebula.render();
                this.systems.dust.render();
                this.systems.interaction.render();

                requestAnimationFrame(this.animate);
            }

            run() {
                this.isRunning = true;
                this.lastTime = performance.now();
                requestAnimationFrame(this.animate);
            }
        }

        // ═══════════════════════════════════════════════════════════════════
        // INITIALIZATION
        // ═══════════════════════════════════════════════════════════════════

        const experience = new CosmicExperience();

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => { experience.init(); experience.run(); });
        } else {
            experience.init();
            experience.run();
        }

    </script>
</body>
</html>
